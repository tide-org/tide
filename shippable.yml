language: python

python:
  - 3.7

branches:
  only:
    - master

env:
  - secure: UAp/M5JK3eedE1zrM38TDogOcDdHfdHnJoB4mhjOznoL2Ek7oznlabO0rmDbvrqP03XKaIFShFD8CEPCLXvWinCR9ElfvsEQigvjqwf3NE+2LNL1mQ4gtKiJwS5sSJNwbstMhhoRsIDY18Zi5vWgc0X2Kp04so8+v3pGMVdpbf9tP9qJN1rdEeXqphGkxS4N6XWhuJUSdIPMZ7z/7QixiDxuvea14yUkiQeOsQiM+AqQvsyS54Yi+BsBZ1yAz2cblNcv5dJauGs6okIHYhj9Og88MBWK4J2U7H4bkjkJgMYIVcb3ocueyVetXIFrOjXXntfTjDjvMyE03BXL+NI1Bw==

pre_ci_boot:
    options: "-v $SHIPPABLE_BUILD_DIR:$SHIPPABLE_BUILD_DIR"

build:
  ci:
    - echo $PWD
    - echo $SHIPPABLE_BUILD_DIR
    - ls -alh $SHIPPABLE_BUILD_DIR
    - docker volume ls
    - docker-compose -f $SHIPPABLE_BUILD_DIR/tests/docker/docker-compose-shippable.yml run --rm --service-ports test-python-tide sh -c "ls -alh /work && sleep 10" 
    - sleep 5
    - docker-compose -f $SHIPPABLE_BUILD_DIR/tests/docker/docker-compose-shippable.yml logs
    - docker inspect docker_test-python-tide
